<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°”ì¹´ë¼</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial;
  text-align:center;
  padding:30px;
}
input, button {
  padding:10px;
  margin:5px;
  font-size:16px;
}
button { cursor:pointer; }
.box {
  border:1px solid #444;
  padding:20px;
  margin-top:20px;
}
.hidden { display:none; }

#top {
  font-size:18px;
  margin-bottom:20px;
}

/* ì‚¬ë‹¤ë¦¬ */
#ladder {
  display:flex;
  justify-content:center;
  gap:30px;
  margin:20px 0;
}
.line {
  width:6px;
  height:220px;
  background:#555;
  position:relative;
}
.line.active {
  animation: drop 1s linear;
  background:#fff;
}

@keyframes drop {
  0% { box-shadow: 0 0 0 white; }
  100% { box-shadow: 0 220px 0 white; }
}
</style>
</head>

<body>

<h1>ğŸ® í™€ì§ / ì‚¬ë‹¤ë¦¬</h1>

<div id="top" class="hidden">
  <span id="topName"></span> |
  í˜„ì¬ í¬ì¸íŠ¸: <span id="topPoint"></span>
</div>

<!-- ë©”ì¸ -->
<div id="main" class="box">
  <input id="name" placeholder="ë‹‰ë„¤ì„">
  <input id="point" type="number" placeholder="ë³´ìœ  ê¸ˆì•¡">
  <br>
  <button onclick="startOddEven()">í™€ì§</button>
  <button onclick="startLadder()">ì‚¬ë‹¤ë¦¬</button>
</div>

<!-- ê²Œì„ -->
<div id="game" class="box hidden">
  <h2 id="gameTitle"></h2>
  <input id="bet" type="number" placeholder="ë°°íŒ… ê¸ˆì•¡">

  <div id="gameArea"></div>

  <div id="ladder" class="hidden">
    <div class="line" id="l1"></div>
    <div class="line" id="l2"></div>
    <div class="line" id="l3"></div>
    <div class="line" id="l4"></div>
    <div class="line" id="l5"></div>
  </div>

  <p id="result"></p>
  <button onclick="back()">â† ë©”ì¸</button>
</div>

<script>
let name, point;

// ìƒë‹¨ í‘œì‹œ
function updateTop() {
  topName.innerText = name;
  topPoint.innerText = point;
}

// ê³µí†µ ì „í™˜
function showGame(title) {
  main.classList.add("hidden");
  game.classList.remove("hidden");
  top.classList.remove("hidden");
  gameTitle.innerText = title;
  result.innerText = "";
  updateTop();
}

// ì´ˆê¸° ì²´í¬
function initPlayer() {
  name = nameInput.value;
  point = Number(pointInput.value);
  if (!name || !point) {
    alert("ë‹‰ë„¤ì„ê³¼ ë³´ìœ  ê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    return false;
  }
  return true;
}

// í™€ì§
function startOddEven() {
  if (!initPlayer()) return;
  showGame("í™€ì§");
  ladder.classList.add("hidden");
  gameArea.innerHTML = `
    <button onclick="oddEven('í™€')">í™€</button>
    <button onclick="oddEven('ì§')">ì§</button>
  `;
}

function oddEven(choice) {
  const bet = betCheck();
  if (bet === null) return;

  const r = Math.random() < 0.5 ? "í™€" : "ì§";
  const m = (choice === r) ? 2 : -1;
  point += bet * m;
  updateTop();

  result.innerText = `ê²°ê³¼: ${r} / ë°°ìœ¨ ${m}`;
}

// ì‚¬ë‹¤ë¦¬
function startLadder() {
  if (!initPlayer()) return;
  showGame("ì‚¬ë‹¤ë¦¬");
  ladder.classList.remove("hidden");
  resetLines();

  gameArea.innerHTML = `
    <p>ë²ˆí˜¸ ì„ íƒ</p>
    <button onclick="ladderPlay(1)">1</button>
    <button onclick="ladderPlay(2)">2</button>
    <button onclick="ladderPlay(3)">3</button>
    <button onclick="ladderPlay(4)">4</button>
    <button onclick="ladderPlay(5)">5</button>
  `;
}

function ladderPlay(num) {
  const bet = betCheck();
  if (bet === null) return;

  resetLines();
  const line = document.getElementById("l" + num);
  line.classList.add("active");

  const multipliers = [3, 2, 0, -1, -2].sort(() => Math.random() - 0.5);
  const multi = multipliers[num - 1];

  setTimeout(() => {
    point += bet * multi;
    updateTop();
    result.innerText = `ì„ íƒ ${num}ë²ˆ / ë°°ìœ¨ ${multi}`;
  }, 1000);
}

function resetLines() {
  document.querySelectorAll(".line").forEach(l => l.classList.remove("active"));
}

// ë°°íŒ… ì²´í¬
function betCheck() {
  const bet = Number(betInput.value);
  if (!bet || bet <= 0) {
    alert("ë°°íŒ… ê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    return null;
  }
  if (bet > point) {
    alert("ë³´ìœ  ê¸ˆì•¡ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.");
    return null;
  }
  return bet;
}

// ë©”ì¸ ë³µê·€
function back() {
  game.classList.add("hidden");
  main.classList.remove("hidden");
  top.classList.add("hidden");
  betInput.value = "";
}

// DOM shortcuts
  function updateTop() {
  topName.innerText = name;
  topPoint.innerText = point;
}
const nameInput = document.getElementById("name");
const pointInput = document.getElementById("point");
const betInput = document.getElementById("bet");
const main = document.getElementById("main");
const game = document.getElementById("game");
const top = document.getElementById("top");
const gameTitle = document.getElementById("gameTitle");
const gameArea = document.getElementById("gameArea");
const result = document.getElementById("result");
const ladder = document.getElementById("ladder");
</script>

</body>
</html>
