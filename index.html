<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ν™€μ§ / μ‚¬λ‹¤λ¦¬ κ²μ„</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial;
  text-align:center;
  padding:30px;
}
input, button {
  padding:10px;
  margin:5px;
  font-size:16px;
}
button { cursor:pointer; }
.box {
  border:1px solid #444;
  padding:20px;
  margin-top:20px;
}
.hidden { display:none; }
</style>
</head>

<body>

<h1>π® ν™€μ§ / μ‚¬λ‹¤λ¦¬</h1>

<!-- λ©”μΈ -->
<div id="main" class="box">
  <input id="name" placeholder="λ‹‰λ„¤μ„">
  <input id="point" type="number" placeholder="λ³΄μ  ν¬μΈνΈ">
  <br>
  <button onclick="startOddEven()">ν™€μ§</button>
  <button onclick="startLadder()">μ‚¬λ‹¤λ¦¬</button>
</div>

<!-- κ²μ„ -->
<div id="game" class="box hidden">
  <h2 id="gameTitle"></h2>
  <p id="info"></p>

  <input id="bet" type="number" placeholder="λ°°ν… ν¬μΈνΈ">
  <div id="gameArea"></div>

  <p id="result"></p>
  <button onclick="back()">β† λ©”μΈ</button>
</div>

<script>
let name, point;
let ladderMap = {};

// κ³µν†µ ν™”λ©΄ μ „ν™
function showGame(title) {
  document.getElementById("main").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  document.getElementById("gameTitle").innerText = title;
  document.getElementById("result").innerText = "";
}

// ν™€μ§ μ‹μ‘
function startOddEven() {
  name = nameCheck();
  if (!name) return;

  showGame("π² ν™€μ§");
  document.getElementById("info").innerText =
    `${name} | ν„μ¬ ν¬μΈνΈ: ${point}`;

  document.getElementById("gameArea").innerHTML = `
    <button onclick="oddEven('ν™€')">ν™€</button>
    <button onclick="oddEven('μ§')">μ§</button>
  `;
}

// ν™€μ§ κ²°κ³Ό
function oddEven(choice) {
  const bet = betCheck();
  if (bet === null) return;

  const result = Math.random() < 0.5 ? "ν™€" : "μ§";
  const multi = (choice === result) ? 2 : -1;

  point += bet * multi;

  document.getElementById("result").innerText =
    `μ„ νƒ: ${choice}\nκ²°κ³Ό: ${result}\nλ°°μ¨: ${multi}\nν„μ¬ ν¬μΈνΈ: ${point}`;
}

// μ‚¬λ‹¤λ¦¬ μ‹μ‘
function startLadder() {
  name = nameCheck();
  if (!name) return;

  shuffleLadder();
  showGame("π μ‚¬λ‹¤λ¦¬");

  document.getElementById("info").innerText =
    `${name} | ν„μ¬ ν¬μΈνΈ: ${point}`;

  document.getElementById("gameArea").innerHTML = `
    <p>λ²νΈ μ„ νƒ</p>
    <button onclick="ladder(1)">1</button>
    <button onclick="ladder(2)">2</button>
    <button onclick="ladder(3)">3</button>
    <button onclick="ladder(4)">4</button>
    <button onclick="ladder(5)">5</button>
  `;
}

// μ‚¬λ‹¤λ¦¬ κ²°κ³Ό
function ladder(num) {
  const bet = betCheck();
  if (bet === null) return;

  const multi = ladderMap[num];
  point += bet * multi;

  document.getElementById("result").innerText =
    `μ„ νƒ λ²νΈ: ${num}\nλ°°μ¨: ${multi}\nν„μ¬ ν¬μΈνΈ: ${point}`;
}

// μ‚¬λ‹¤λ¦¬ λ°°μ¨ λλ¤ μ„κΈ°
function shuffleLadder() {
  const multipliers = [3, 2, 0, -1, -2];
  multipliers.sort(() => Math.random() - 0.5);

  ladderMap = {
    1: multipliers[0],
    2: multipliers[1],
    3: multipliers[2],
    4: multipliers[3],
    5: multipliers[4]
  };
}

// μ…λ ¥ μ²΄ν¬
function nameCheck() {
  const n = document.getElementById("name").value;
  const p = Number(document.getElementById("point").value);

  if (!n || !p) {
    alert("λ‹‰λ„¤μ„κ³Ό ν¬μΈνΈ μ…λ ¥!");
    return null;
  }
  point = p;
  return n;
}

function betCheck() {
  const bet = Number(document.getElementById("bet").value);
  if (!bet || bet <= 0) {
    alert("λ°°ν… ν¬μΈνΈ μ…λ ¥!");
    return null;
  }
  if (bet > point) {
    alert("λ³΄μ  ν¬μΈνΈλ³΄λ‹¤ λ§μ΄ λ°°ν…ν•  μ μ—†μ!");
    return null;
  }
  return bet;
}

// λ©”μΈ λ³µκ·€
function back() {
  document.getElementById("game").classList.add("hidden");
  document.getElementById("main").classList.remove("hidden");
  document.getElementById("bet").value = "";
}
</script>

</body>
</html>
