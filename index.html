<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ν™€μ§ / μ‚¬λ‹¤λ¦¬ κ²μ„</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial;
  text-align:center;
  padding:30px;
}
input, button {
  padding:10px;
  margin:5px;
  font-size:16px;
}
button { cursor:pointer; }
.box {
  border:1px solid #444;
  padding:20px;
  margin-top:20px;
}
.hidden { display:none; }

#top {
  font-size:18px;
  margin-bottom:20px;
}

/* μ‚¬λ‹¤λ¦¬ */
#ladder {
  display:flex;
  justify-content:center;
  gap:30px;
  margin:20px 0;
}
.line {
  width:6px;
  height:220px;
  background:#555;
  position:relative;
}
.line.active {
  animation: drop 1s linear;
  background:#fff;
}

@keyframes drop {
  0% { box-shadow: 0 0 0 white; }
  100% { box-shadow: 0 220px 0 white; }
}
</style>
</head>

<body>

<h1>π® ν™€μ§ / μ‚¬λ‹¤λ¦¬</h1>

<div id="top" class="hidden">
  <span id="topName"></span> |
  ν„μ¬ ν¬μΈνΈ: <span id="topPoint"></span>
</div>

<!-- λ©”μΈ -->
<div id="main" class="box">
  <input id="name" placeholder="λ‹‰λ„¤μ„">
  <input id="point" type="number" placeholder="λ³΄μ  ν¬μΈνΈ">
  <br>
  <button onclick="startOddEven()">ν™€μ§</button>
  <button onclick="startLadder()">μ‚¬λ‹¤λ¦¬</button>
</div>

<!-- κ²μ„ -->
<div id="game" class="box hidden">
  <h2 id="gameTitle"></h2>
  <input id="bet" type="number" placeholder="λ°°ν… ν¬μΈνΈ">

  <div id="gameArea"></div>

  <div id="ladder" class="hidden">
    <div class="line" id="l1"></div>
    <div class="line" id="l2"></div>
    <div class="line" id="l3"></div>
    <div class="line" id="l4"></div>
    <div class="line" id="l5"></div>
  </div>

  <p id="result"></p>
  <button onclick="back()">β† λ©”μΈ</button>
</div>

<script>
let name, point;

// μƒλ‹¨ ν‘μ‹
function updateTop() {
  topName.innerText = name;
  topPoint.innerText = point;
}

// κ³µν†µ μ „ν™
function showGame(title) {
  main.classList.add("hidden");
  game.classList.remove("hidden");
  top.classList.remove("hidden");
  gameTitle.innerText = title;
  result.innerText = "";
  updateTop();
}

// μ΄κΈ° μ²΄ν¬
function initPlayer() {
  name = nameInput.value;
  point = Number(pointInput.value);
  if (!name || !point) {
    alert("λ‹‰λ„¤μ„κ³Ό ν¬μΈνΈ μ…λ ¥!");
    return false;
  }
  return true;
}

// ν™€μ§
function startOddEven() {
  if (!initPlayer()) return;
  showGame("π² ν™€μ§");
  ladder.classList.add("hidden");
  gameArea.innerHTML = `
    <button onclick="oddEven('ν™€')">ν™€</button>
    <button onclick="oddEven('μ§')">μ§</button>
  `;
}

function oddEven(choice) {
  const bet = betCheck();
  if (bet === null) return;

  const r = Math.random() < 0.5 ? "ν™€" : "μ§";
  const m = (choice === r) ? 2 : -1;
  point += bet * m;
  updateTop();

  result.innerText = `κ²°κ³Ό: ${r} / λ°°μ¨ ${m}`;
}

// μ‚¬λ‹¤λ¦¬
function startLadder() {
  if (!initPlayer()) return;
  showGame("π μ‚¬λ‹¤λ¦¬");
  ladder.classList.remove("hidden");
  resetLines();

  gameArea.innerHTML = `
    <p>λ²νΈ μ„ νƒ</p>
    <button onclick="ladderPlay(1)">1</button>
    <button onclick="ladderPlay(2)">2</button>
    <button onclick="ladderPlay(3)">3</button>
    <button onclick="ladderPlay(4)">4</button>
    <button onclick="ladderPlay(5)">5</button>
  `;
}

function ladderPlay(num) {
  const bet = betCheck();
  if (bet === null) return;

  resetLines();
  const line = document.getElementById("l" + num);
  line.classList.add("active");

  const multipliers = [3, 2, 0, -1, -2].sort(() => Math.random() - 0.5);
  const multi = multipliers[num - 1];

  setTimeout(() => {
    point += bet * multi;
    updateTop();
    result.innerText = `μ„ νƒ ${num}λ² / λ°°μ¨ ${multi}`;
  }, 1000);
}

function resetLines() {
  document.querySelectorAll(".line").forEach(l => l.classList.remove("active"));
}

// λ°°ν… μ²΄ν¬
function betCheck() {
  const bet = Number(betInput.value);
  if (!bet || bet <= 0) {
    alert("λ°°ν… ν¬μΈνΈ μ…λ ¥!");
    return null;
  }
  if (bet > point) {
    alert("λ³΄μ  ν¬μΈνΈ μ΄κ³Ό!");
    return null;
  }
  return bet;
}

// λ©”μΈ λ³µκ·€
function back() {
  game.classList.add("hidden");
  main.classList.remove("hidden");
  top.classList.add("hidden");
  betInput.value = "";
}

// DOM shortcuts
const nameInput = document.getElementById("name");
const pointInput = document.getElementById("point");
const betInput = document.getElementById("bet");
const main = document.getElementById("main");
const game = document.getElementById("game");
const top = document.getElementById("top");
const gameTitle = document.getElementById("gameTitle");
const gameArea = document.getElementById("gameArea");
const result = document.getElementById("result");
const ladder = document.getElementById("ladder");
</script>

</body>
</html>
